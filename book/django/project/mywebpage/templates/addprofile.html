<!DOCTYPE html>
<html>
<head>
	<title>ประวัติผลการเรียน</title>
  <script src="https://code.jquery.com/jquery-1.12.0.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.15/d3.min.js" charset="utf-8"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
  {% load staticfiles %}
	<link rel="stylesheet" type="text/css" href="{% static 'style.css' %}" >
</head>
<body>
<div id="framework">

	<!-- --------banner---------- -->
	<div id="banner-home">
		<img src="{% static "banner/banner.jpg" %}"> 
	</div>

	<!-- ---------menu------------ -->
	<div id="menu-bar">
		<ul id="menu">
		  <li ><a href="../homep/" id="home">หน้าแรก</a></li>
		  <li><a href="../addprofile/" id="history-click">ประวัติผลการเรียน</a></li>
		  <li><a href="../predict/" id="predict">ทำนายผลการเรียน</a></li>
		</ul>
	</div>

	<form id="myForm">
		<div id="subjectForm">
			<caption>ตารางแสดงผลการเรียน</caption>
			<table id="colTable" rules="all" style="background:#fff;">
				<tr>
					<th id="term" >Term/Year</th>
					<th id="Subject">Subject</th>
					<th id="Grade">Grade</th>
				</tr>
			</table>
			<div id="enrollTable">
			</div>

				<!--<tr>
						<th>
							<select>
								{% for i in grade %}
								<option>{{ i}}</option>
								{% endfor %}
							</select>
						</th>
						<th>
							<select id="dropdownsub_name">
								{% for i in subjectData %}
								<option>{{ i.sub_id }}{{ i.sub_name }}</option>
								{% endfor %}
							</select>
						</th>
						<th>
							<select>
								{% for i in grade %}
								<option>{{ i}}</option>
								{% endfor %}
							</select>
						</th>
				</tr>-->
			
		</div>
		<div id="tableAdd">
		</div>
	  	<button id="btnSave" type="button">บันทึก</button>
	  	<button id="btnAdd" type="button">เพิ่ม</button>

	</form>

<script> 
	d3.json("../jsonEnrollment.json",function(error,jsonEnrollment){
			//console.log(jsonEnrollment);
			var js = $(jsonEnrollment.js_enrollments);
		//js=4
			$(js).each(function(index, value){
				//loop -> create 4 row
				//index = 1;
				$('#enrollTable')
					.append($('<p>').attr("id",index+1)
						.append($('<tr>')
							.append($('<td>').append($('<input size="6px">').attr("value",value.term+"/"+value.year).attr("readonly","readonly")))
							.append($('<td>').append($('<input size="35px">').attr("value",value.stdsub_name).attr("readonly","readonly")))
							.append($('<td>').append($('<input size="3px">').attr("value",value.grade).attr("readonly","readonly")))
							.append($('<button>แก้ไข</button>').attr("id",index+1)).append($('<button>ลบ</button>').attr("id",index+1)))

						//.text(value.term+"/"+value.year))
						//.append($('<td>').text(value.stdsub_name))
						//.append($('<td>').text(value.grade))
					/*/.append($('<tr>').attr("id",index+1)
						.append($('<td>').text(value.term+"/"+value.year))
						.append($('<td>').text(value.stdsub_name))
						.append($('<td>').text(value.grade))*/
					);	
			});	

			



			/*$('#btnEdit').click(function(){
				$.ajax({
					url:'jsonEnrollment.json',
					type:'GET',
					async:false,
					success: function(d)
				});

			});*/

	});

	//add subject to dropdown 
	d3.json("../jsonSubject.json",function(error,jsonfile){


		$( "#btnAdd" ).click(function() {
			//alert(jsonfile);
			var selsub = $('<select>').appendTo('#subjectForm');
			$(jsonfile.js_subjects).each(function() {
			   	selsub.append($('<option>').text(this.sub_id+this.sub_name));
			});
			var selgrade = $('<select>').appendTo('#subjectForm');
			var grades  = ["A", "B", "B+","C", "C+", "D", "D+", "F", "W", "S", "S#","U","U#"];
			$.each(grades, function(index, value){
				selgrade_val = selgrade.append($('<option>').text(value));
			});

		});

	});
	
</script>
</div>
</body>
</html>
