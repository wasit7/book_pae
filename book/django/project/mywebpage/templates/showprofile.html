<!DOCTYPE html>
<html>
<head>
	<title>ประวัติผลการเรียน</title>
  <script src="https://code.jquery.com/jquery-1.12.0.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.15/d3.min.js" charset="utf-8"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
  {% load staticfiles %}
	<link rel="stylesheet" type="text/css" href="{% static 'style.css' %}" >
</head>
<body>
<div id="framework">

<!-- ####banner#### -->
	<div id="banner-top">
		<span id="logout"><button>ออกจากระบบ</button></span>
		<span id="user">{{request.session.username}}</span>
	</div>

	<div id="banner-home">
		<img src="{% static "banner/new-banner-middle.jpg" %}"> 
	</div>

	<!-- ---------menu------------ -->
	<div id="menu-bar">
		<ul id="menu">
		  <li ><a href="../homep/" id="home">หน้าแรก</a></li>
		  <li><a href="../addprofile/" id="history-click">ประวัติผลการเรียน</a></li>
		  <li><a href="../predict/" id="predict">ทำนายผลการเรียน</a></li>
		</ul>
	</div>

{% verbatim %}
<div ng-app="showprofile" ng-controller="myCtrl">
{% endverbatim %}

	<div class="containerAllEnrollment">
		{% verbatim %}
		<table>
		<tr>
			<th>Term/Year</th>
			<th>Subject</th>
			<th>Grade</th>
		</tr>
		<tr ng-repeat="(key, value) in enrollments">
			<td>{{value.term}}/{{value.year}}</td>
			<td>{{key}}</td>
			<td>{{value.grade}}</td>
		</tr>
	</table>
    </div>
    
    <button id="btnEdit" ng-click="toAddprofile()">แก้ไขข้อมูล</button>
</div>
{% endverbatim %}

<script> 
var app = angular.module('showprofile', []);
app.controller('myCtrl', function($scope, $http, $window) {
	$http.get("{% url 'jsonEnrollment' %}")
	.then(function(response) {
		$scope.enrollments = response.data;
    });

    $scope.toAddprofile = function(){
    	//console.log("OK")
    	//$location.path('/addprofile');
    	$window.location.href = '../addprofile';
    }
});
	
</script>
</div>
</body>
</html>
